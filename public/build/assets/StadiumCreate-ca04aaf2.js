import{_ as p,a as d,r as g,o as n,c as r,b as e,g as l,j as _,k as f,F as a,e as m,l as v,d as y,w as C,t as c,f as k}from"./app-7d9e4c6c.js";const S={name:"StadiumCreate",data(){return{stadium:{name:"",founding:2023,country_id:null,club_id:0},countries:[],clubs:[],errors:[],formSubmittingProcess:!1,name:"Создание стадиона"}},beforeMount(){document.title=this.name},mounted(){this.getCountries()},methods:{getCountries(){d.country.getAll().then(o=>{var t;this.countries=o,this.stadium.country_id=(t=this.countries[0])==null?void 0:t.id,this.getSelectedCountryClubs()})},getSelectedCountryClubs(){console.log(this.stadium),this.clubs=[],this.stadium.club_id=0,d.country.getById(this.stadium.country_id).then(o=>{this.clubs=o.clubs})},submitForm(){if(this.formSubmittingProcess)return!1;if(this.errors=[],!this.formValidated)return this.errors.push("Вы заполнили не все поля формы"),!1;const o=this.stadium;this.stadium.club_id||delete o.club_id,this.formSubmittingProcess=!0,d.stadium.create(o).then(t=>{console.log(t),this.formSubmittingProcess=!1,this.stadium.name="",this.stadium.founding=2023}).catch(t=>{console.log(t),this.errors=t.data,this.formSubmittingProcess=!1})}},computed:{formValidated(){return this.stadium.name.trim()&&this.stadium.founding&&this.stadium.country_id}}},V={class:"container container--section container--pv container--center"},x=e("h2",{class:"heading"},"Создать стадион",-1),w={class:"form__block"},F=e("label",{for:"stadium",class:"form__input_label"},"Название",-1),P={class:"form__block"},B=e("label",{for:"stadium",class:"form__input_label"},"Год основания",-1),M={class:"form__block"},N=e("label",{for:"stadium",class:"form__input_label"},"Страна",-1),U=["value"],D={class:"form__block"},T=e("label",{for:"stadium",class:"form__input_label"},"Клуб",-1),j=e("option",{value:"0"},"Не выбран",-1),A=["value"],E={class:"form__block"},I=["disabled"],L={class:"container container--pv-s"};function q(o,t,z,G,i,u){const b=g("router-link");return n(),r("div",V,[x,e("form",{class:"form",onSubmit:t[5]||(t[5]=v((...s)=>u.submitForm&&u.submitForm(...s),["prevent"]))},[e("div",w,[F,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.stadium.name=s),type:"text",class:"form__input",placeholder:"Название",id:"stadiumName"},null,512),[[_,i.stadium.name,void 0,{trim:!0}]])]),e("div",P,[B,l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.stadium.founding=s),type:"number",class:"form__input",placeholder:"Год основания",id:"stadiumFounding"},null,512),[[_,i.stadium.founding,void 0,{trim:!0}]])]),e("div",M,[N,l(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.stadium.country_id=s),onChange:t[3]||(t[3]=(...s)=>u.getSelectedCountryClubs&&u.getSelectedCountryClubs(...s)),class:"dropdown"},[(n(!0),r(a,null,m(i.countries,s=>(n(),r("option",{value:s.id},c(s.name),9,U))),256))],544),[[f,i.stadium.country_id]])]),e("div",D,[T,l(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>i.stadium.club_id=s),class:"dropdown"},[j,(n(!0),r(a,null,m(i.clubs,s=>(n(),r("option",{key:s.id,value:s.id},c(s.name),9,A))),128))],512),[[f,i.stadium.club_id]])]),e("div",E,[e("button",{type:"submit",disabled:!u.formValidated,class:"button form__submit_button"},"Создать",8,I),(n(!0),r(a,null,m(i.errors,(s,h)=>(n(),r("p",{class:"form__input_error",key:h},c(s),1))),128))])],32),e("div",L,[y(b,{to:{name:"stadiums"},class:"link link--underlined"},{default:C(()=>[k("К списку стадионов")]),_:1})])])}const J=p(S,[["render",q]]);export{J as default};
