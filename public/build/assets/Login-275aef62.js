import{_ as b,a as l,r as u,o as c,c as d,d as s,w as a,i as g,g as h,v as f,e as m,j as k,F as v,b as P,k as S,f as y,t as x}from"./app-99cc9943.js";const V={name:"Login",data(){return{credentials:{email:"",password:""},errors:[],showPassword:!1,formSubmittingProcess:!1,name:"Авторизация"}},beforeMount(){document.title=this.name},methods:{toggleShowingPassword(){this.showPassword=!this.showPassword},submitForm(){if(this.formSubmittingProcess)return!1;if(this.errors=[],!this.formValidated)return this.errors.push("Вы заполнили не все поля формы"),!1;this.formSubmittingProcess=!0,this.credentials.email=this.credentials.email.trim(),this.credentials.password=this.credentials.password.trim(),l.user.login(this.credentials).then(r=>{const e=r.access_token;localStorage.setItem(l.LOCAL_STORAGE_KEY,e),l.user.me().then(n=>{this.$store.commit("authorize",n)}).catch(n=>console.log(n.data)),this.formSubmittingProcess=!1,this.$router.push({name:"index"})}).catch(r=>{r.status===401&&this.errors.push("Неверный логин или пароль"),this.formSubmittingProcess=!1})}},computed:{formValidated(){return this.credentials.email.trim()&&this.credentials.password.trim()}}},C={class:"container container--section container--pv container--center"},M=s("h2",{class:"heading"},"Вход в аккаунт",-1),E={class:"form__block"},F=s("label",{for:"email_input",class:"form__input_label"},"E-Mail",-1),L={class:"form__block"},B={for:"password_input",class:"form__input_label"},D=["type"],N={class:"form__block"},T=["disabled"],A={class:"container container--pv-s"};function O(r,e,n,U,t,i){const _=u("font-awesome-icon"),p=u("router-link");return c(),d("div",C,[M,s("form",{class:"form",onSubmit:e[2]||(e[2]=S((...o)=>i.submitForm&&i.submitForm(...o),["prevent"]))},[s("div",E,[F,a(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.credentials.email=o),type:"email",class:"form__input",placeholder:"E-Mail",id:"email_input"},null,512),[[g,t.credentials.email,void 0,{trim:!0}]])]),s("div",L,[s("label",B,[h(" Пароль "),a(m(_,{onClick:i.toggleShowingPassword,icon:"fa-solid fa-eye",class:"form__input_eye"},null,8,["onClick"]),[[f,!t.showPassword]]),a(m(_,{onClick:i.toggleShowingPassword,icon:"fa-solid fa-eye-slash",class:"form__input_eye"},null,8,["onClick"]),[[f,t.showPassword]])]),a(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.credentials.password=o),type:t.showPassword&&"text"||"password",class:"form__input",placeholder:"Пароль",id:"password_input"},null,8,D),[[k,t.credentials.password,void 0,{trim:!0}]])]),s("div",N,[s("button",{type:"submit",disabled:!i.formValidated,class:"button form__submit_button"},"Войти",8,T),(c(!0),d(v,null,P(t.errors,(o,w)=>(c(),d("p",{class:"form__input_error",key:w},x(o),1))),128))])],32),s("div",A,[m(p,{to:{name:"register"},class:"link link--underlined"},{default:y(()=>[h("Создать аккаунт")]),_:1})])])}const z=b(V,[["render",O]]);export{z as default};
