import{_ as f,a as b,r as v,o,c as r,b as t,g as i,j as c,k as m,F as a,e as d,l as C,d as g,w as k,t as _,f as S}from"./app-bd571e0e.js";const V={name:"playerCreate",data(){return{player:{name:"",surname:"",birth:null,number:null,position_id:1,country_id:null,club_id:0},clubCountryId:null,countries:[],clubs:[],positions:[{id:1,name:"Нападающий"},{id:2,name:"Полузащитник"},{id:3,name:"Защитник"},{id:4,name:"Вратарь"}],errors:[],formSubmittingProcess:!1,name:"Создание игрока"}},beforeMount(){document.title=this.name},mounted(){this.getCountries()},methods:{getCountries(){b.country.getAll().then(n=>{var l,p;this.countries=n,this.player.country_id=(l=this.countries[0])==null?void 0:l.id,this.clubCountryId=(p=this.countries[0])==null?void 0:p.id,this.getSelectedCountryClubs()})},getSelectedCountryClubs(){console.log(this.player),this.clubs=[],this.player.club_id=0,b.country.getById(this.clubCountryId).then(n=>{this.clubs=n.clubs})},submitForm(){if(this.formSubmittingProcess)return!1;if(this.errors=[],!this.formValidated)return this.errors.push("Вы заполнили не все поля формы"),!1;const n=this.player;this.player.club_id||delete n.club_id,this.formSubmittingProcess=!0,b.player.create(n).then(l=>{console.log(l),this.formSubmittingProcess=!1,this.player={name:"",surname:"",birth:null,number:null,position_id:1,country_id:1,club_id:0}}).catch(l=>{console.log(l),this.errors=l.data,this.formSubmittingProcess=!1})}},computed:{formValidated(){return this.player.name.trim()&&this.player.birth&&this.player.country_id&&this.player.surname.trim()&&this.player.number&&this.player.club_id&&this.player.position_id}}},x={class:"container container--section container--pv container--center"},w=t("h2",{class:"heading"},"Создать игрока",-1),P={class:"form__block"},U=t("label",{for:"playerName",class:"form__input_label"},"Имя",-1),N={class:"form__block"},B=t("label",{for:"playerSurname",class:"form__input_label"},"Фамилия",-1),I={class:"form__block"},F=t("label",{for:"playerBirth",class:"form__input_label"},"Дата рождения",-1),M={class:"form__block"},D=t("label",{for:"playerNumber",class:"form__input_label"},"Игровой номер",-1),T={class:"form__block"},j=t("label",{for:"playerPosition",class:"form__input_label"},"Позиция",-1),A=["value"],E={class:"form__block"},L=t("label",{for:"playerCountry",class:"form__input_label"},"Гражданство",-1),q=["value"],z={class:"form__block"},G=t("label",{for:"playerCountry",class:"form__input_label"},"Страна клуба",-1),H=["value"],J={class:"form__block"},K=t("label",{for:"playerClub",class:"form__input_label"},"Клуб",-1),O=["disabled"],Q=["value"],R={class:"form__block"},W=["disabled"],X={class:"container container--pv-s"};function Y(n,l,p,Z,s,u){const y=v("router-link");return o(),r("div",x,[w,t("form",{class:"form",onSubmit:l[9]||(l[9]=C((...e)=>u.submitForm&&u.submitForm(...e),["prevent"]))},[t("div",P,[U,i(t("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>s.player.name=e),type:"text",class:"form__input",placeholder:"Имя",id:"playerName"},null,512),[[c,s.player.name,void 0,{trim:!0}]])]),t("div",N,[B,i(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s.player.surname=e),type:"text",class:"form__input",placeholder:"Фамилия",id:"playerSurname"},null,512),[[c,s.player.surname,void 0,{trim:!0}]])]),t("div",I,[F,i(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>s.player.birth=e),type:"date",class:"form__input",placeholder:"Дата рождения",id:"playerBirth"},null,512),[[c,s.player.birth,void 0,{trim:!0}]])]),t("div",M,[D,i(t("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>s.player.number=e),type:"number",min:"1",max:"999",class:"form__input",placeholder:"Игровой номер",id:"playerNumber"},null,512),[[c,s.player.number,void 0,{trim:!0}]])]),t("div",T,[j,i(t("select",{"onUpdate:modelValue":l[4]||(l[4]=e=>s.player.position_id=e),class:"dropdown",id:"playerPosition"},[(o(!0),r(a,null,d(s.positions,e=>(o(),r("option",{value:e.id},_(e.name),9,A))),256))],512),[[m,s.player.position_id]])]),t("div",E,[L,i(t("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>s.player.country_id=e),class:"dropdown",id:"playerCountry"},[(o(!0),r(a,null,d(s.countries,e=>(o(),r("option",{value:e.id},_(e.name),9,q))),256))],512),[[m,s.player.country_id]])]),t("div",z,[G,i(t("select",{"onUpdate:modelValue":l[6]||(l[6]=e=>s.clubCountryId=e),onChange:l[7]||(l[7]=(...e)=>u.getSelectedCountryClubs&&u.getSelectedCountryClubs(...e)),class:"dropdown",id:"playerCountry"},[(o(!0),r(a,null,d(s.countries,e=>(o(),r("option",{value:e.id},_(e.name),9,H))),256))],544),[[m,s.clubCountryId]])]),t("div",J,[K,i(t("select",{"onUpdate:modelValue":l[8]||(l[8]=e=>s.player.club_id=e),class:"dropdown",id:"playerClub",disabled:s.clubs.length===0},[(o(!0),r(a,null,d(s.clubs,e=>(o(),r("option",{key:e.id,value:e.id},_(e.name),9,Q))),128))],8,O),[[m,s.player.club_id]])]),t("div",R,[t("button",{type:"submit",disabled:!u.formValidated,class:"button form__submit_button"},"Создать",8,W),(o(!0),r(a,null,d(s.errors,(e,h)=>(o(),r("p",{class:"form__input_error",key:h},_(e),1))),128))])],32),t("div",X,[g(y,{to:{name:"players"},class:"link link--underlined"},{default:k(()=>[S("К списку игроков")]),_:1})])])}const ee=f(V,[["render",Y]]);export{ee as default};
